{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "common",
  "description": "Common definitions in published feed metadata.",
  "definitions": {
    "movie_id": {
      "description": "Content ID of a movie. Must match the pattern`^(movie)-([a-zA-Z0-9_-]+)$.`",
      "type": "string",
      "pattern": "^(movie)-([a-zA-Z0-9_-]+)$"
    },
    "movie_genre_id": {
      "description": "Content ID of a movie genre. Must match the pattern `^(movie_genre)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(movie_genre)-([a-zA-Z0-9_-]+)$"
    },
    "tvshow_id": {
      "description": "Content ID of a TV show. Must match the pattern `^(tvshow)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(tvshow)-([a-zA-Z0-9_-]+)$"
    },
    "tvshow_genre_id": {
      "description": "Content ID of a TV show genre. Must match the pattern `^(tvshow_genre)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(tvshow_genre)-([a-zA-Z0-9_-]+)$"
    },
    "season_id": {
      "description": "Content ID of a TV show season. Must match the pattern `^(season)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(season)-([a-zA-Z0-9_-]+)$"
    },
    "episode_id": {
      "description": "Content ID of a TV show episode. Must match the pattern `^(episode)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(episode)-([a-zA-Z0-9_-]+)$"
    },
    "collection_id": {
      "description": "Content ID of a collection. Must match the pattern `^(collection)-([a-zA-Z0-9_-]+)$`.",
      "type": "string",
      "pattern": "^(collection)-([a-zA-Z0-9_-]+)$"
    },
    "tags": {
      "description": "Array of tags associated with the content.",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "production_countries": {
      "description": "Array of production countries",
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "license": {
      "description": "Content metadata license that defines the content availability regions and time frame.",
      "type": "object",
      "title": "license",
      "properties": {
        "countries": {
          "description": "Array of countries where the license applies.",
          "type": "array",
          "items": {
            "$ref": "../common.json#/definitions/non_empty_string"
          }
        },
        "start_time": {
          "description": "Time when license becomes valid.",
          "type": "string",
          "format": "date-time"
        },
        "end_time": {
          "description": "Time when license becomes invalid.",
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false
    },
    "licenses": {
      "description": "Array of licenses assigned to the content.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/license"
      }
    },
    "image": {
      "description": "Asset image metadata.",
      "type": "object",
      "title": "image",
      "properties": {
        "type": {
          "description": "Type of the image.",
          "type": "string",
          "title": "image_type",
          "enum": ["COVER", "TEASER"]
        },
        "path": {
          "description": "URI to the image file.",
          "type": "string",
          "pattern": "/[^/]+(.*)"
        },
        "width": {
          "description": "Width of the image in pixels.",
          "type": "integer"
        },
        "height": {
          "description": "Height of the image in pixels.",
          "type": "integer"
        }
      },
      "required": ["type", "path", "width", "height"],
      "additionalProperties": false
    },
    "images": {
      "description": "Array of images associated with the content.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/image"
      }
    },
    "video_stream": {
      "description": "Video stream metadata",
      "type": "object",
      "title": "video_stream",
      "additionalProperties": false,
      "properties": {
        "drm_key_id": {
          "description": "DRM Key ID",
          "type": "string"
        },
        "label": {
          "description": "Label indicating the type of stream",
          "type": "string"
        },
        "format": {
          "description": "Packaging format of the stream",
          "type": "string",
          "title": "format",
          "enum": ["DASH", "HLS", "DASH_HLS", "CMAF", "DASH_ON_DEMAND"]
        },
        "initial_file": {
          "description": "Name of the initial file",
          "type": "string"
        },
        "iv": {
          "description": "IV",
          "type": "string"
        },
        "language_code": {
          "description": "If an audio file, the language code of the audio",
          "type": "string"
        },
        "bandwidth_in_bps": {
          "description": "Bandwidth of the video/audio",
          "type": "integer"
        }
      }
    },
    "video": {
      "description": "Video metadata.",
      "type": "object",
      "title": "video",
      "properties": {
        "type": {
          "description": "Type of the video stream.",
          "type": "string",
          "title": "video_usage_type",
          "enum": ["MAIN", "TRAILER"]
        },
        "title": {
          "description": "Video title.",
          "$ref": "../common.json#/definitions/non_empty_string"
        },
        "duration": {
          "description": "Duration of the stream in seconds.",
          "type": "integer"
        },
        "audio_languages": {
          "description": "Array of audio languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "subtitle_languages": {
          "description": "Array of subtitle languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "caption_languages": {
          "description": "Array of caption languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dash_manifest": {
          "description": "URI to a DASH manifest.",
          "type": "string"
        },
        "hls_manifest": {
          "description": "URI to an HLS manifest.",
          "type": "string"
        },
        "video_streams": {
          "description": "Video Streams",
          "type": "array",
          "items": {
            "$ref": "#/definitions/video_stream"
          }
        },
        "is_protected": {
          "description": "Indicates whether a stream is protected with DRM.",
          "type": "boolean"
        },
        "output_format": {
          "description": "Output format of the stream.",
          "type": "string",
          "title": "format",
          "enum": ["DASH", "HLS", "DASH_HLS", "CMAF", "DASH_ON_DEMAND"]
        }
      },
      "required": ["title", "output_format", "is_protected", "type"],
      "additionalProperties": false
    },
    "videos": {
      "description": "Array of video streams associated with movie or episode.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/video"
      }
    },
    "trailer": {
      "description": "Video stream metadata.",
      "type": "object",
      "title": "video",
      "properties": {
        "type": {
          "description": "Type of the video stream.",
          "type": "string",
          "title": "video_usage_type",
          "enum": ["TRAILER"]
        },
        "title": {
          "description": "Video title.",
          "$ref": "../common.json#/definitions/non_empty_string"
        },
        "duration": {
          "description": "Duration of the stream in seconds.",
          "type": "integer"
        },
        "audio_languages": {
          "description": "Array of audio languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "subtitle_languages": {
          "description": "Array of subtitle languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "caption_languages": {
          "description": "Array of caption languages available in the stream.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dash_manifest": {
          "description": "URI to a DASH manifest.",
          "type": "string"
        },
        "hls_manifest": {
          "description": "URI to an HLS manifest.",
          "type": "string"
        },
        "video_streams": {
          "description": "Video Streams",
          "type": "array",
          "items": {
            "$ref": "#/definitions/video_stream"
          }
        },
        "is_protected": {
          "description": "Indicates whether a stream is protected with DRM.",
          "type": "boolean"
        },
        "output_format": {
          "description": "Output format of the stream.",
          "type": "string",
          "title": "format",
          "enum": ["DASH", "HLS", "DASH_HLS", "CMAF", "DASH_ON_DEMAND"]
        }
      },
      "required": ["title", "output_format", "is_protected", "type"],
      "additionalProperties": false
    },
    "trailers": {
      "description": "Array of video streams associated with tv show or season.",
      "type": "array",
      "items": {
        "$ref": "#/definitions/trailer"
      }
    },
    "release_date": {
      "description": "Release date of an item.",
      "type": "string",
      "format": "regex",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$"
    }
  }
}
