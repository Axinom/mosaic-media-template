asyncapi: 2.0.0
info:
  title: VOD-to-Live Service
  version: '1.0.0'
  description: |
    VOD-to-Live Service
# AsyncAPI extension, used to define service id. If not defined, as service id will be used info.title in lower-kebab-case
x-service-id: vod-to-live-service

channels:
  # events
  'channel.protection_key_created':
    bindings:
      amqp:
        queue:
          name: channel:protection_key_created
    subscribe:
      message:
        $ref: '#/components/messages/channel-protection-key-created-event'
  'channel.check_job_status_failed':
    bindings:
      amqp:
        queue:
          name: channel:check_job_status_failed
    subscribe:
      message:
        $ref: '#/components/messages/check-channel-job-status-failed-event'
  'channel.check_job_status_succeeded':
    bindings:
      amqp:
        queue:
          name: channel:check_job_status_succeeded
    subscribe:
      message:
        $ref: '#/components/messages/check-channel-job-status-succeeded-event'

components:
  messages:
    # events
    channel-protection-key-created-event:
      contentType: application/json
      payload:
        $ref: 'events/live-stream-protection-key-created-event.json'
    check-channel-job-status-failed-event:
      contentType: application/json
      payload:
        $ref: 'events/check-channel-job-status-failed-event.json'
    check-channel-job-status-succeeded-event:
      contentType: application/json
      payload:
        $ref: 'events/check-channel-job-status-succeeded-event.json'
